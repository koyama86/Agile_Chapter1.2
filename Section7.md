URL

# Section7 __単体テストの自動化__

## 概要
- __単体テスト__(__ユニットテスト__)を自動化は、__XP__(__エクストリーム・プログラミング__)の重要なプラクティスの1つ。

- 「コード記入→テスト→不具合票記入」のようなテストのサイクルを自動化し、何度でも繰り返せるようにしたものを、**回帰テスト**という。
  
- __PMBOK__(__プロジェクトマネジメント知識体系ガイド__)によると、テスト工程には、単体テスト、結合テスト、運用テスト、システムテストなど様々な段階がある。
    
- xUnitなどのフレームワークを使用しない場合、下記のような開発とテストのサイクルを手動で行うことになる。  
>- プログラムのコードを書く
>- プログラムのコードのテスト仕様書を書く
>- プログラムを動かしてテスト仕様書と比較する
>- テスト仕様書から外れていたら不具合票を書く
>- 不具合票を受け取ったら、設計や仕様をチェックしてコードを修正する
>- 修正したコードを再びテストする
>- テストが合格したら「合格」の判子を押す
   
- XPの場合、テスト駆動という形で「テストコードを書く」ことが最初の手順で決められている。先にテストコードを書くことで、不具合に対処するであろうコードが少なくなるという不安から解消されるための心理的安全性を確保される。
 
- 回帰テスト手法が世の中に出回った時、外部システムへの接続や利用するデータベースなどは、**モック**を作ることで回帰テストを行うことが推奨されていた。
  
- テスタビリティの高いコード(回帰テストのやりやすいコード)の範囲を広くするだけでもコードの品質は上がる。そのため、コードを書くときに楽にテストをできる範囲を広げるという回帰テストの活用が効果的。
  
- 動かせないコードよりも、ライブラリ単位やクラス単位で動かしてリトライ＆エラーを繰り返し、目で確認できるようにすることがテスト駆動開発の発想の原点となっている。

## メリット
- 以下の工程のサイクルを自動化し、何度でも繰り返すことができる。
>- コードを書く
>- テストをする
>- 不具合があれば、不具合票を書く

## デメリット
- 回帰テストに適さないコードが存在する。例としては、以下のようなものがある。
>- UIにインラインで書かれた(ラムダ式など)コード
>- プログラムを動かすのに複雑な初期設定が必要なコード
>- プログラム実行時に外部システムに接続が必要なコード
 